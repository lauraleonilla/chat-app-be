{"version":3,"sources":["Store.js","components/Form.js","components/Topics.js","components/Chatbox.js","components/Login.js","App.js","index.js"],"names":["socket","Context","createContext","initialState","General","from","msg","Javascript","Frameworks","reducer","state","action","_action$payload","payload","topic","type","Object","objectSpread","defineProperty","concat","toConsumableArray","sendChatAction","value","emit","Store","props","_useReducer","useReducer","_useReducer2","slicedToArray","allChats","dispatch","io","on","data","loggedUserJSON","window","localStorage","getItem","user","JSON","parse","react_default","a","createElement","Provider","children","Form","_ref","_useContext","useContext","_useState","useState","_useState2","message","setMessage","className","Input","placeholder","onChange","event","target","onKeyPress","length","key","preventDefault","autoFocus","Button","basic","color","content","onClick","Topics","topics","selectTopic","chatTopics","map","e","i","id","toggle","active","innerText","Chatbox","keys","activeTopic","selectActicveTopic","components_Topics","Label","components_Form","LoginForm","username","usernameHandler","login","onSubmit","App","userName","setIsUserName","_useState3","_useState4","loggedIn","setIsLoggedIn","useEffect","handleLogin","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","abrupt","axios","post","setItem","stringify","location","reload","stop","_x","apply","this","arguments","Login","removeItem","src_Store","components_Chatbox","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.929868a7.chunk.js","sourcesContent":["import React, { createContext, useReducer } from 'react'\nimport io from 'socket.io-client'\n\nexport const Context = createContext()\n\nconst initialState = {\n  General: [{ from: 'Me', msg: 'Hello!' }, { from: 'You', msg: 'Let\\'s chat!' }],\n  Javascript: [],\n  Frameworks: []\n}\n\nconst reducer = (state, action) => {\n  const { from, msg, topic } = action.payload\n  switch (action.type) {\n  case 'RECEIVE MESSAGE':\n    return {\n      ...state,\n      [topic]: [\n        ...state[topic],\n        {\n          from: from,\n          msg: msg\n        }\n      ]\n    }\n  default:\n    return state\n  }\n}\n\nlet socket\n\nconst sendChatAction = value => {\n  socket.emit('chat', value)\n}\n\nconst Store = props => {\n  const [allChats, dispatch] = useReducer(reducer, initialState)\n  if (!socket) {\n    socket = io(':3001')\n    socket.on('chat', data => {\n      dispatch({ type: 'RECEIVE MESSAGE', payload: data })\n    })\n  }\n  const loggedUserJSON = window.localStorage.getItem('loggedIn')\n  const user = JSON.parse(loggedUserJSON)\n\n  return (\n    <Context.Provider value={{ allChats, sendChatAction, user }}>\n      {props.children}\n    </Context.Provider>\n  )\n}\n\nexport default Store\n","import React, { useState, useContext } from 'react'\nimport { Input, Button } from 'semantic-ui-react'\nimport { Context } from '../Store'\n\nconst Form = ({ topic }) => {\n  const { user, sendChatAction } = useContext(Context)\n  const [message, setMessage] = useState('')\n\n  const handleMessage = event => {\n    setMessage(event.target.value)\n  }\n\n  const clickHandler = event => {\n    if (message.length < 1) return\n    if (event.key === 'Enter') {\n      event.preventDefault()\n      sendChatAction({ from: user, msg: message, topic: topic })\n      setMessage('')\n    }\n  }\n\n  return (\n    <div className='inputContainer'>\n      <form>\n        <Input\n          className='inputField'\n          value={message}\n          placeholder='New message'\n          onChange={handleMessage}\n          onKeyPress={clickHandler}\n          autoFocus={true}\n        />\n        <Button\n          className='actionBtn'\n          basic\n          color='teal'\n          content='Send'\n          onClick={event => {\n            event.preventDefault()\n            if (message.length < 1) return\n            sendChatAction({ from: user, msg: message, topic: topic })\n            setMessage('')\n          }}\n        />\n      </form>\n    </div>\n  )\n}\n\nexport default Form\n","import React from 'react'\nimport { Button } from 'semantic-ui-react'\n\nconst Topics = ({ topics, selectTopic }) => {\n  const chatTopics = topics.map((e, i) => (\n    <Button\n      id='topicSelector'\n      color='teal'\n      key={i}\n      toggle\n      active={false}\n      onClick={e => selectTopic(e.target.innerText)}\n    >\n      {e}\n    </Button>\n  ))\n  return <div className='topicDiv'>{chatTopics}</div>\n}\n\nexport default Topics\n","import React, { useContext, useState } from 'react'\nimport { Label } from 'semantic-ui-react'\nimport { Context } from '../Store'\nimport Form from './Form'\nimport Topics from './Topics'\n\nconst Chatbox = () => {\n  const { allChats } = useContext(Context)\n  const topics = Object.keys(allChats)\n  const [activeTopic, selectActicveTopic] = useState(topics[0])\n\n  return (\n    <div className='appContainer'>\n      <Topics topics={topics} selectTopic={selectActicveTopic} />\n      <div className='chatInputWrapper'>\n        <div className='chatBox'>\n          {allChats[activeTopic].map((e, i) => {\n            return (\n              <div key={i} className='message'>\n                <Label key={i} color='teal'>\n                  {e.from}\n                </Label>\n                <span className='messageText' key={e.msg}>\n                  {e.msg}\n                </span>\n              </div>\n            )\n          })}\n        </div>\n        <Form topic={activeTopic} />\n      </div>\n    </div>\n  )\n}\n\nexport default Chatbox\n","import React from 'react'\nimport { Input, Button } from 'semantic-ui-react'\n\nconst LoginForm = ({ username, usernameHandler, login }) => {\n\n  return (\n    <div className='loginPage'>\n      <form onSubmit={login}>\n        <Input\n          className='inputField'\n          value={username}\n          placeholder='Write a username'\n          onChange={usernameHandler}\n          autoFocus={true}\n        />\n        <Button\n          type='submit'\n          className='actionBtn'\n          basic\n          color='teal'\n          content='Login'\n        />\n      </form>\n    </div>\n  )\n}\n\nexport default LoginForm\n","import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport ChatBox from './components/Chatbox'\nimport Login from './components/Login'\nimport { Button } from 'semantic-ui-react'\nimport Store from './Store'\n\nconst App = () => {\n  const [userName, setIsUserName] = useState('')\n  const [loggedIn, setIsLoggedIn] = useState(null)\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedIn')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setIsLoggedIn(user)\n    }\n  }, [])\n\n  const handleLogin = async event => {\n    event.preventDefault()\n    if (userName.length < 1) return\n    if (event.key === 'Enter') await axios.post('/login', { userName })\n    window.localStorage.setItem('loggedIn', JSON.stringify(userName))\n    window.location.reload()\n  }\n\n  const handleUsername = event => {\n    setIsUserName(event.target.value)\n  }\n\n  const handleLogout = () => {\n    window.localStorage.removeItem('loggedIn')\n    window.location.reload()\n  }\n\n  return (\n    <div>\n      {loggedIn === null ? (\n        <div>\n          <div className='loginHeader'>\n            <h1>Login and chat with others</h1>\n          </div>\n          <Login\n            username={userName}\n            usernameHandler={handleUsername}\n            login={handleLogin}\n          />\n        </div>\n      ) : (\n        <div>\n          <div className='headerContainer'>\n            <h1>Select a topic and start chatting!</h1>\n            <Button className='actionBtn' basic color='teal' content='Logout' onClick={() => handleLogout()} />\n          </div>\n          <Store>\n            <ChatBox />\n          </Store>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}